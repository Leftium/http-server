#!/usr/bin/env node

var HTTPServer = require('../lib/http-server').HTTPServer,
    fs = require('fs'),
    path = require('path'),
    config = null;

if (path.existsSync("./config.json")) {
  console.log("Found configuration file ".green + "`./config.json`".cyan);

  try {
    config = JSON.parse(fs.readFileSync("./config.json").toString())
  } catch (e) {
    console.log("Error parsing ".red +"`./config.json`: ".cyan+("\""+e.message+"\"") + "; Ignoring.".yellow);
  }
}

var httpServer = new HTTPServer(config);

httpServer.start();

process.on('SIGINT', function() {
  httpServer.log('http-server stopped.'.red);
  return process.exit();
});
